---
import Layout from '../layouts/Layout.astro';

const posts = [
	{
		title: "Google 2026: Era Comerțului Agentic",
		description: "Google anunță tranziția către Agentic Commerce. Află cum UCP și AI schimbă regulile PPC.",
		url: "/blog/agentic-commerce-google-2026",
		tag: "News",
		date: "16 Februarie 2026"
	},
	{
		title: "Evoluția Costurilor PPC (2024-2026): Analiză Comparativă",
		description: "Analiză detaliată a costurilor CPC pe Google, Meta și TikTok cu predicții pentru 2026.",
		url: "/blog/ppc-performance-analysis-2024-2026",
		tag: "Data",
		date: "15 Februarie 2026"
	},
	{
		title: "Revoluția PPC în 2026: ChatGPT Ads și Era Intent-ului",
		description: "Cum OpenAI și Google schimbă regulile jocului prin reclame conversaționale.",
		url: "/blog/ppc-revolution-2026",
		tag: "Analiză",
		date: "15 Februarie 2026"
	},
	{
		title: "Google Ads 2026: Strategii în Recesiune",
		description: "Cum să muți focusul pe Profit-First Bidding când piața se contractă.",
		url: "/blog/google-ads-2026-recesiune",
		tag: "Strategie",
		date: "14 Februarie 2026"
	},
	{
		title: "AdTech 2026: Revoluția First-Party Data",
		description: "Ghid tehnic despre Server-Side Tracking și supraviețuirea fără cookies.",
		url: "/blog/adtech-2026-tracking",
		tag: "Tehnologie",
		date: "14 Februarie 2026"
	}
];

const categories = ['Toate', ...new Set(posts.map(post => post.tag))];
---

<Layout title="Roa Marketing — Știri & Analize">
	<div class="container mx-auto px-6 py-16">
		<section class="text-center space-y-6 mb-12">
			<p class="text-sm uppercase tracking-[0.4em] text-cyan-300 font-bold">Insights zilnice</p>
			<h1 class="text-4xl md:text-6xl font-black leading-tight">Știri, analize și tactici pentru PPC în era agentică.</h1>
			<p class="text-lg text-slate-400 max-w-3xl mx-auto">Filtrează după categorie sau caută în timp real ideile care te interesează. Tot conținutul este produs de swarm-ul nostru specializat pe marketing de performanță.</p>
		</section>

		<section class="sticky top-24 z-10 bg-slate-950/80 backdrop-blur-xl border border-white/10 rounded-3xl p-6 mb-10 shadow-2xl">
			<div class="flex flex-wrap items-center gap-3 mb-4">
				{categories.map(category => (
					<button
						type="button"
						class="category-pill px-4 py-2 rounded-full border border-white/10 text-sm font-semibold text-slate-300 hover:border-cyan-400 hover:text-white transition-all"
						data-category-btn
						data-category={category}
					>
						{category}
					</button>
				))}
			</div>
			<div class="relative">
				<input id="postSearch" type="search" placeholder="Caută după titlu, categorie sau cuvinte cheie" class="w-full bg-white/5 border border-white/10 rounded-2xl px-5 py-3 text-base focus:border-cyan-400 focus:outline-none placeholder:text-slate-500" />
				<span class="absolute right-5 top-1/2 -translate-y-1/2 text-slate-500 text-sm">⌘K</span>
			</div>
		</section>

		<section class="py-4">
			<h2 class="sr-only">Ultimele articole</h2>
			<div class="grid grid-cols-1 md:grid-cols-2 gap-8" id="postsGrid">
				{posts.map(post => (
					<a
						href={post.url}
						class="post-card group border border-white/10 rounded-3xl p-6 hover:border-cyan-500 transition-all bg-white/5"
						data-post-card
						data-category={post.tag}
						data-search={`${post.title.toLowerCase()} ${post.description.toLowerCase()} ${post.tag.toLowerCase()}`}
					>
						<div class="flex items-center justify-between mb-4">
							<span class="text-cyan-400 text-xs font-bold uppercase tracking-[0.3em]">{post.tag}</span>
							<small class="text-xs text-slate-500">{post.date}</small>
						</div>
						<h3 class="text-2xl font-bold mb-3 group-hover:text-cyan-300 transition-colors">{post.title}</h3>
						<p class="text-slate-400 text-base">{post.description}</p>
					</a>
				))}
			</div>
			<div id="emptyState" class="hidden text-center py-16 border border-dashed border-white/10 rounded-3xl mt-6">
				<p class="text-slate-400">Nu am găsit articole pentru filtrul căutat. Încearcă alt cuvânt sau resetează categoriile.</p>
			</div>
		</section>
	</div>

	<script is:inline>
		const buttons = document.querySelectorAll('[data-category-btn]');
		const cards = document.querySelectorAll('[data-post-card]');
		const searchInput = document.querySelector('#postSearch');
		const emptyState = document.querySelector('#emptyState');
		let activeCategory = 'Toate';

		const normalize = (value) => value.toLowerCase().trim();

		const filterCards = () => {
			const query = normalize(searchInput.value || '');
			let hasVisible = false;

			cards.forEach(card => {
				const category = card.dataset.category;
				const searchable = card.dataset.search;
				const matchCategory = activeCategory === 'Toate' || category === activeCategory;
				const matchQuery = searchable.includes(query);
				const shouldShow = matchCategory && matchQuery;
				card.classList.toggle('hidden', !shouldShow);
				if (shouldShow) {
					hasVisible = true;
				}
			});

			emptyState.classList.toggle('hidden', hasVisible);
		};

		buttons.forEach(button => {
			if (button.dataset.category === 'Toate') {
				button.classList.add('bg-cyan-500/20', 'text-white');
			}

			button.addEventListener('click', () => {
				activeCategory = button.dataset.category;
				buttons.forEach(btn => btn.classList.remove('bg-cyan-500/20', 'text-white'));
				button.classList.add('bg-cyan-500/20', 'text-white');
				filterCards();
			});
		});

		searchInput.addEventListener('input', filterCards);
		filterCards();
	</script>
</Layout>
